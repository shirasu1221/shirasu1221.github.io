<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚ã¤æ£® ç¾è¡“å“ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</title>
    <style>
        :root {
            --main-color: #5fb48b;
            --bg-color: #fdfaf0;
            --card-bg: #ffffff;
            --text-color: #4a4a4a;
            --hint-bg: #fff9e6;
            --hint-text: #555555;
            --sidebar-bg: #ffffff;
            --scrollbar-width: 24px;
            --img-size: 100%;
        }
        body.dark-mode {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --hint-bg: #3d3a30;
            --hint-text: #cccccc;
            --sidebar-bg: #252525;
        }

        * { transition: background-color 0.3s ease, color 0.3s ease; box-sizing: border-box; }
        html, body { overflow: hidden; width: 100%; height: 100%; margin: 0; padding: 0; touch-action: none; }
        main::-webkit-scrollbar { display: none; }
        main { -ms-overflow-style: none; scrollbar-width: none; }

        body {
            display: grid;
            grid-template-areas: "nav nav" "main scroll" "footer footer";
            grid-template-rows: auto 1fr auto;
            grid-template-columns: 1fr var(--scrollbar-width);
            background-color: var(--bg-color); color: var(--text-color);
            font-family: sans-serif;
        }

        /* --- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–ï¼‰ --- */
        nav { grid-area: nav; background: var(--sidebar-bg); border-bottom: 2px solid var(--main-color); z-index: 100; }
        .tabs-row { display: flex; width: 100%; }
        .tab { flex: 1; padding: 12px; border: none; background: none; font-weight: bold; cursor: pointer; color: var(--text-color); border-bottom: 4px solid transparent; font-size: 0.9rem; }
        .tab.active { border-bottom-color: var(--main-color); color: var(--main-color); }

        /* ç”»åƒã‚µã‚¤ã‚ºèª¿æ•´ã‚¨ãƒªã‚¢ã®ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ– */
        .size-ctrl-box { padding: 5px 15px; border-top: 1px solid rgba(0,0,0,0.05); background: rgba(0,0,0,0.02); }
        .size-ctrl-header { display: flex; justify-content: space-between; align-items: center; font-size: 0.75rem; font-weight: bold; cursor: pointer; padding: 5px 0; }
        #size-slider-wrapper { height: 0; overflow: hidden; transition: height 0.3s ease; }
        #size-slider-wrapper.open { height: 40px; }

        /* --- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ --- */
        #scroll-area { grid-area: scroll; background: rgba(0,0,0,0.03); position: relative; z-index: 2000; border-left: 1px solid rgba(0,0,0,0.05); touch-action: none; }
        #scroll-thumb { position: absolute; left: 3px; width: 18px; height: 100px; background: var(--main-color); border-radius: 10px; cursor: grab; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }

        /* --- å…±é€šãƒœã‚¿ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        .btn-circle {
            width: 50px; height: 50px;
            border: none; border-radius: 50%;
            background: var(--main-color);
            color: white;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.3s;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .btn-circle:active { transform: scale(1.2) !important; }

        /* --- ä¸Šã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ --- */
        #back-to-top {
            position: fixed;
            right: calc(var(--scrollbar-width) + 15px); 
            bottom: 100px;
            z-index: 1500;
            opacity: 0; visibility: hidden;
            transform: translateY(10px);
        }
        #back-to-top.show { opacity: 1; visibility: visible; transform: translateY(0); }

        main { grid-area: main; padding: 15px; overflow-y: scroll; overflow-x: hidden; width: 100%; -webkit-overflow-scrolling: touch; touch-action: pan-y; }
        .progress-card { background: var(--card-bg); padding: 12px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .bar-bg { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; margin: 6px 0; }
        .bar-fill { height: 100%; background: var(--main-color); width: 0%; transition: width 0.8s ease; }

        .item { background: var(--card-bg); margin-bottom: 15px; padding: 15px; border-radius: 12px; border-left: 6px solid var(--main-color); box-shadow: 0 2px 8px rgba(0,0,0,0.06); cursor: pointer; }
        .reveal { opacity: 0; transform: translateX(20px); transition: opacity 0.4s ease, transform 0.4s ease-out; }
        .reveal.active { opacity: 1; transform: translateX(0); }

        input[type="checkbox"] { width: 30px; height: 30px; }
        .item-name-box label { font-weight: bold; margin-left: 12px; font-size: 1.1rem; }
        .hint { margin-top: 12px; font-size: 0.9rem; background: var(--hint-bg); color: var(--hint-text); padding: 12px; border-radius: 8px; }
        .img-container { text-align: center; margin-top: 10px; }
        .comparison-img { width: var(--img-size); max-width: 100%; border-radius: 8px; border: 1px solid #ddd; cursor: zoom-in; }
        
        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        #img-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; display: none; align-items: center; justify-content: center; cursor: zoom-out; opacity: 0; transition: opacity 0.3s; }
        #img-modal.active { display: flex; opacity: 1; }
        #modal-img { max-width: 95%; max-height: 95%; border-radius: 10px; transform: scale(0.8); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #img-modal.active #modal-img { transform: scale(1); }

        footer { grid-area: footer; background: var(--sidebar-bg); padding: 12px; display: flex; gap: 20px; border-top: 1px solid rgba(0,0,0,0.1); justify-content: center; width: 100%; z-index: 1000; }

        @media (min-width: 768px) {
            body { grid-template-areas: "nav main scroll"; grid-template-columns: 260px 1fr var(--scrollbar-width); grid-template-rows: 1fr; }
            nav { border-bottom: none; border-right: 3px solid var(--main-color); height: 100vh; grid-row: 1 / 3; }
            .tabs-row { flex-direction: column; padding: 20px 10px; }
            .tab { padding: 18px; font-size: 1rem; }
            .size-ctrl-box { background: none; border-top: 1px solid rgba(0,0,0,0.05); margin-top: 20px; padding: 20px; }
            #size-slider-wrapper { height: auto !important; overflow: visible; }
            .size-ctrl-header { cursor: default; font-size: 0.8rem; }
            .size-ctrl-header span:last-child { display: none; } /* çŸ¢å°ã‚’æ¶ˆã™ */
            footer { position: fixed; bottom: 30px; right: 55px; flex-direction: column; background: transparent; border: none; width: auto; gap: 15px; padding: 0; }
            #back-to-top { position: relative; right: 0; bottom: 0; margin-bottom: 5px; }
        }
        .content { display: none; }
        .content.active { display: block; }
    </style>
</head>
<body>

<nav>
    <div class="tabs-row">
        <button class="tab active" id="btn-paintings" onclick="showTab('paintings')">ğŸ–¼ï¸ åç”»</button>
        <button class="tab" id="btn-statues" onclick="showTab('statues')">ğŸ—¿ å½«åˆ»</button>
    </div>
    <div class="size-ctrl-box">
        <div class="size-ctrl-header" onclick="toggleSizeSlider()">
            <span>ğŸ–¼ï¸ ç”»åƒã‚µã‚¤ã‚ºèª¿æ•´</span>
            <span id="size-arrow">â–¼</span>
        </div>
        <div id="size-slider-wrapper">
            <input type="range" id="size-slider" min="20" max="100" value="100" oninput="changeImgSize(this.value)" style="width:100%; margin-top:10px;">
        </div>
    </div>
</nav>

<main id="main-scroll">
    <div class="progress-card">
        <div style="display: flex; justify-content: space-between; font-size: 0.8em; font-weight: bold;">
            <span>ğŸ–¼ï¸ é€²æ—</span><span id="txt-p">0% (0/30)</span>
        </div>
        <div class="bar-bg"><div id="bar-p" class="bar-fill"></div></div>
        <div style="display: flex; justify-content: space-between; font-size: 0.8em; font-weight: bold; margin-top:8px;">
            <span>ğŸ—¿ é€²æ—</span><span id="txt-s">0% (0/13)</span>
        </div>
        <div class="bar-bg"><div id="bar-s" class="bar-fill"></div></div>
    </div>
    <div id="paintings" class="content active"></div>
    <div id="statues" class="content"></div>
</main>

<div id="scroll-area"><div id="scroll-thumb"></div></div>

<div id="img-modal" onclick="closeModal()"><img id="modal-img" src=""></div>

<button id="back-to-top" class="btn-circle" onclick="scrollToTop()">â–²</button>

<footer>
    <button class="btn-circle" onclick="exportJSON()">ğŸ’¾</button>
    <button class="btn-circle" onclick="document.getElementById('importFile').click()">ğŸ“‚</button>
    <button class="btn-circle" style="background:#666;" onclick="toggleDarkMode()">ğŸŒ“</button>
    <input type="file" id="importFile" style="display:none" onchange="importJSON(event)" accept=".json">
</footer>

<script>
const GITHUB_RAW_BASE = "https://raw.githubusercontent.com/shirasu1221/shirasu1221.github.io/refs/heads/main/Atsumori/";
const data = {
    paintings: [
        {name: "ã‚¢ã‚«ãƒ†ã‚™ãƒŸãƒƒã‚¯ãªã‚ã„ã‹ã‚™", hint: "å³ä¸Šã«ã‚³ãƒ¼ãƒ’ãƒ¼ã®è·¡ãŒã‚ã‚‹ã®ãŒå½ç‰©"}, {name: "ã‚ã‚‰ãµã‚™ã‚‹ã‚ã„ã‹ã‚™ã®ã²ãŸã‚™ã‚Š", hint: "é›·ç¥ã®ä½“ãŒç™½ã„ã®ãŒå½ç‰©"},
        {name: "ã‚ã‚‰ãµã‚™ã‚‹ã‚ã„ã‹ã‚™ã®ã¿ãã‚™", hint: "é¢¨ç¥ã®ä½“ãŒç·‘è‰²ãªã®ãŒå½ç‰©"}, {name: "ã„ã„ã‹ã‚“ã—ã‚™ã®ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã„ã„ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ã„ããªã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã„ã•ã¾ã—ã„ã‚ã„ã‹ã‚™", hint: "ä¸­å¤®ã®äººç‰©ã®çœ‰ãŒä¸‹ãŒã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ã„ãªã›ãªã‚ã„ã‹ã‚™", hint: "çœ‰ãŒãƒã®å­—ã«ä¸ŠãŒã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ãŠã“ã‚™ãã‹ãªã‚ã„ã‹ã‚™", hint: "å¥¥ã®äººç‰©ã®æ¨ªã«ã„ã‚‹äººãŒå¤§ãã„ã®ãŒå½ç‰©"}, {name: "ãŠãŸã‚™ã‚„ã‹ãªã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ãŠã¡ã¤ã„ãŸã‚ã„ã‹ã‚™", hint: "æ³¨ã„ã§ã„ã‚‹ç‰›ä¹³ãŒãƒ‰ãƒãƒ‰ãƒå‡ºã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ãŠã‚‚ã—ã‚ã„ã‚ã„ã‹ã‚™", hint: "èƒ¸å…ƒã«èŠ±ãŒãªã„ã®ãŒå½ç‰©"},
        {name: "ã‹ã¡ã®ã‚ã‚‹ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ãã‚Œã„ãªã‚ã„ã‹ã‚™", hint: "å³å´ã«æœ¨ãŒç”Ÿãˆã¦ã„ãªã„ã®ãŒå½ç‰©"},
        {name: "ã—ã™ã‚™ã¿ã‚†ãã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ã—ãªã‚„ã‹ãªã‚ã„ã‹ã‚™", hint: "äººç‰©ãŒå·¦ã‚’å‘ã„ã¦ã„ã‚‹ã€ã¾ãŸã¯å·¨å¤§ãªã®ãŒå½ç‰©"},
        {name: "ã™ã“ã‚™ã„ã‚ã„ã‹ã‚™", hint: "ä¸­å¤®ã®äººç‰©ãŒå¸½å­ã‚’è¢«ã£ã¦ã„ãªã„ã®ãŒå½ç‰©"}, {name: "ã™ã¦ããªã‚ã„ã‹ã‚™", hint: "è€³é£¾ã‚ŠãŒæ˜Ÿå‹ã«ãªã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã™ã¯ã‚™ã‚‰ã—ã„ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ãŸãŠã‚„ã‹ãªã‚ã„ã‹ã‚™", hint: "æŠ±ã„ã¦ã„ã‚‹å‹•ç‰©ãŒç°è‰²ãªã®ãŒå½ç‰©"},
        {name: "ãŸãã‚™ã„ã¾ã‚Œãªã‚‹ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ã¡ã‹ã‚‰ã¤ã‚™ã‚ˆã„ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¡ã¿ã¤ãªã‚ã„ã‹ã‚™", hint: "èŠ±ã®è‰²ãŒç´«è‰²ãªã®ãŒå½ç‰©"}, {name: "ãªãã‚™ã‚ã„ãŸã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã«ãã‚™ã‚„ã‹ãªã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ã²ã‹ã‚Šã®ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¾ãŸãŸãã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}, {name: "ã¿ã“ã‚™ã¨ãªã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã‚†ã†ã‚ã„ãªã‚ã„ã‹ã‚™", hint: "çœ‰æ¯›ãŒé‡£ã‚Šä¸ŠãŒã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ã‚ˆãã¿ã‚‹ã‚ã„ã‹ã‚™", hint: "æœ¬ç‰©ã®ã¿"}
    ],
    statues: [
        {name: "ã„ã—ã‚ãŸã¾ãªã¡ã‚‡ã†ã“ã", hint: "å£è§’ãŒä¸ŠãŒã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ã„ãŸã‚™ã„ãªã¡ã‚‡ã†ã“ã", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã„ã«ã—ãˆã®ã¡ã‚‡ã†ã“ã", hint: "é ­ã«ã‚¢ãƒ³ãƒ†ãƒŠã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã®ãŒå½ç‰©"}, {name: "ã†ã¤ãã—ã„ã¡ã‚‡ã†ã“ã", hint: "é¦–é£¾ã‚ŠãŒã¤ã„ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã“ã†ã“ã‚™ã†ã—ã„ã¡ã‚‡ã†ã“ã", hint: "å³è¶³ãŒå‰ã«å‡ºã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ã—ã‚“ã²ã‚šã¦ããªã¡ã‚‡ã†ã“ã", hint: "è€³é£¾ã‚ŠãŒã¤ã„ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ãŸãã¾ã—ã„ã¡ã‚‡ã†ã“ã", hint: "è…•æ™‚è¨ˆã‚’ã—ã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ã¦ã‹ã‚™ã‹ã‚Šã®ã¡ã‚‡ã†ã“ã", hint: "é’ãå…‰ã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã¨ã¦ã¤ã‚‚ãªã„ã¡ã‚‡ã†ã“ã", hint: "å–æ‰‹ã®è“‹ãŒã‚ã‚‹ã®ãŒå½ç‰©"}, {name: "ãªã—ã‚™ã¿ã®ã‚ã‚‹ã¡ã‚‡ã†ã“ã", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã»ã¼ã›ã„ã‚ãµã‚Œã‚‹ã¡ã‚‡ã†ã“ã", hint: "èˆŒãŒå‡ºã¦ã„ã‚‹ã®ãŒå½ç‰©"}, {name: "ã‚‚ã®ã®ãµã®ã¡ã‚‡ã†ã“ã", hint: "é“å…·ã‚’æŒã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã‚Šã‚Šã—ã„ã¡ã‚‡ã†ã“ã", hint: "å³è„‡ã«æœ¬ã‚’æŠ±ãˆã¦ã„ã‚‹ã®ãŒå½ç‰©"}
    ]
};

const mainScroll = document.getElementById('main-scroll');
const scrollThumb = document.getElementById('scroll-thumb');
const scrollArea = document.getElementById('scroll-area');
const topBtn = document.getElementById('back-to-top');

function syncThumb() {
    const scrollMax = mainScroll.scrollHeight - mainScroll.clientHeight;
    if (scrollMax <= 0) return;
    const pct = mainScroll.scrollTop / scrollMax;
    const thumbMax = scrollArea.clientHeight - scrollThumb.clientHeight;
    scrollThumb.style.top = (pct * thumbMax) + 'px';
    if (mainScroll.scrollTop > 300) topBtn.classList.add('show'); else topBtn.classList.remove('show');
}
mainScroll.addEventListener('scroll', () => requestAnimationFrame(syncThumb));

let isDragging = false, startY, startScrollTop;
const startDrag = (e) => { isDragging = true; mainScroll.style.scrollBehavior = 'auto'; startY = e.pageY || e.touches[0].pageY; startScrollTop = mainScroll.scrollTop; document.body.style.userSelect = 'none'; };
const doDrag = (e) => { if (!isDragging) return; const currentY = e.pageY || (e.touches ? e.touches[0].pageY : 0); const deltaY = currentY - startY; const scrollMax = mainScroll.scrollHeight - mainScroll.clientHeight; const thumbMax = scrollArea.clientHeight - scrollThumb.clientHeight; mainScroll.scrollTop = startScrollTop + (deltaY / thumbMax * scrollMax); };
const stopDrag = () => { isDragging = false; document.body.style.userSelect = ''; };

scrollThumb.addEventListener('mousedown', startDrag);
scrollThumb.addEventListener('touchstart', startDrag, {passive: false});
window.addEventListener('mousemove', doDrag);
window.addEventListener('touchmove', doDrag, {passive: false});
window.addEventListener('mouseup', stopDrag);
window.addEventListener('touchend', stopDrag);

function scrollToTop() { mainScroll.style.scrollBehavior = 'smooth'; mainScroll.scrollTo({ top: 0 }); }
function changeImgSize(val) { document.documentElement.style.setProperty('--img-size', val + '%'); localStorage.setItem('savedImgSize', val); }

function toggleSizeSlider() {
    if (window.innerWidth >= 768) return;
    const wrapper = document.getElementById('size-slider-wrapper');
    const arrow = document.getElementById('size-arrow');
    wrapper.classList.toggle('open');
    arrow.style.transform = wrapper.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
}

function openModal(src) { const modal = document.getElementById('img-modal'); const modalImg = document.getElementById('modal-img'); modalImg.src = src; modal.classList.add('active'); }
function closeModal() { document.getElementById('img-modal').classList.remove('active'); }

const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); else entry.target.classList.remove('active'); }); }, { threshold: 0.1 });

function createList(type, listId) {
    const container = document.getElementById(listId);
    const subDir = type === 'paintings' ? 'painting/' : 'sculpture/';
    data[type].forEach(item => {
        const div = document.createElement('div');
        div.className = 'item reveal';
        const checkId = `check-${item.name}`;
        const isChecked = localStorage.getItem(checkId) === 'true';
        const imgSrc = `${GITHUB_RAW_BASE}${subDir}${encodeURIComponent(item.name)}.jpeg`;
        div.innerHTML = `<div class="item-name-box" style="display:flex; align-items:center; pointer-events:none;"><input type="checkbox" id="${checkId}" ${isChecked ? 'checked' : ''} onclick="updateStatus(this.id)"><label>${item.name}</label></div><div class="hint"><div><b>ç‰¹å¾´:</b> ${item.hint}</div><div class="img-container"><img src="${imgSrc}" class="comparison-img" onclick="openModal(this.src)" onerror="this.parentElement.parentElement.style.display='none'"></div></div>`;
        div.onclick = (e) => { if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'IMG') { const c = div.querySelector('input'); c.checked = !c.checked; updateStatus(c.id); } };
        container.appendChild(div);
        observer.observe(div);
    });
}

function showTab(tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(`btn-${tabName}`).classList.add('active');
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.getElementById(tabName).classList.add('active');
    mainScroll.scrollTop = 0;
}

function updateStatus(id) { localStorage.setItem(id, document.getElementById(id).checked); updateProgressBar(); }
function updateProgressBar() {
    ['paintings', 'statues'].forEach(cat => {
        const key = cat === 'paintings' ? 'p' : 's';
        const checked = data[cat].filter(item => localStorage.getItem(`check-${item.name}`) === 'true').length;
        const total = data[cat].length;
        document.getElementById(`txt-${key}`).innerText = `${Math.round((checked/total)*100)}% (${checked}/${total})`;
        document.getElementById(`bar-${key}`).style.width = `${(checked/total)*100}%`;
    });
}

function exportJSON() {
    const s = {}; Object.keys(localStorage).forEach(k => { if(k.startsWith('check-')) s[k] = localStorage.getItem(k); });
    let f = prompt("åå‰ã‚’ã¤ã‘ã¦ä¿å­˜", "ã‚ã¤æ£®ç¾è¡“å“ãƒªã‚¹ãƒˆ");
    if (f) { const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(s)], {type:'application/json'})); a.download = `${f}.json`; a.click(); }
}

function importJSON(e) {
    const r = new FileReader();
    r.onload = (x) => {
        const j = JSON.parse(x.target.result);
        const darkMode = localStorage.getItem('darkMode');
        const imgSize = localStorage.getItem('savedImgSize');
        localStorage.clear(); 
        if(darkMode) localStorage.setItem('darkMode', darkMode);
        if(imgSize) localStorage.setItem('savedImgSize', imgSize);
        Object.keys(j).forEach(k => localStorage.setItem(k, j[k]));
        location.reload();
    };
    r.readAsText(e.target.files[0]);
}

function toggleDarkMode() { localStorage.setItem('darkMode', document.body.classList.toggle('dark-mode')); }

createList('paintings', 'paintings');
createList('statues', 'statues');
updateProgressBar();
if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark-mode');
const sv = localStorage.getItem('savedImgSize'); if (sv) { document.getElementById('size-slider').value = sv; changeImgSize(sv); }
</script>
</body>
</html>
