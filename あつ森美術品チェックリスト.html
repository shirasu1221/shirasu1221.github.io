<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚ã¤æ£® ç¾è¡“å“ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</title>
    <style>
        :root {
            --main-color: #5fb48b;
            --bg-color: #fdfaf0;
            --card-bg: #ffffff;
            --text-color: #4a4a4a;
            --hint-bg: #fff9e6;
            --sidebar-bg: #ffffff;
            --link-color: #007bff;
            --action-btn-bg: #6c757d;
        }

        body.dark-mode {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --hint-bg: #3d3a30;
            --sidebar-bg: #252525;
            --link-color: #66b2ff;
        }

        body {
            font-family: sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            transition: background-color 0.3s;
            overflow-x: hidden;
            width: 100%;
        }

        /* --- ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼šãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å°‚ç”¨ --- */
        .sidebar {
            position: fixed;
            left: 0; top: 0;
            width: 180px; height: 100vh;
            background: var(--sidebar-bg);
            border-right: 3px solid var(--main-color);
            display: flex; flex-direction: column;
            z-index: 100;
        }

        .nav-label {
            padding: 20px 15px 5px; font-size: 0.75em; font-weight: bold; color: var(--main-color); letter-spacing: 0.1em;
        }

        .tab {
            padding: 18px 15px; border: none; background: none;
            font-weight: bold; cursor: pointer; text-align: left;
            color: var(--text-color); border-left: 5px solid transparent;
            transition: all 0.2s;
        }
        .tab.active { 
            background: rgba(95, 180, 139, 0.1); 
            color: var(--main-color); 
            border-left: 5px solid var(--main-color);
        }

        /* --- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆå³ä¸‹å›ºå®šï¼‰ --- */
        .action-group {
            position: fixed;
            right: 20px; bottom: 20px;
            display: flex; flex-direction: column;
            gap: 10px; z-index: 200;
        }

        .action-btn {
            width: 50px; height: 50px; border-radius: 25px; border: none;
            background: var(--main-color); color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; transition: transform 0.2s;
        }
        .action-btn:hover { transform: scale(1.1); }
        .action-btn.secondary { background: var(--action-btn-bg); }

        /* --- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ --- */
        .main-container { 
            margin-left: 180px; padding: 30px; width: 100%; max-width: 900px; box-sizing: border-box;
        }

        .header-section { margin-bottom: 30px; }
        h1 { color: var(--main-color); margin: 0 0 20px; font-size: 1.6rem; }

        .progress-card {
            background: var(--card-bg); padding: 20px; border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .prog-item { width: 100%; }
        .prog-label { font-size: 0.85em; font-weight: bold; margin-bottom: 8px; display: block; }
        .progress-bar-bg { width: 100%; height: 12px; background: #eee; border-radius: 6px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--main-color); width: 0%; transition: width 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .content { display: none; width: 100%; }
        .content.active { display: block; }

        .item {
            background: var(--card-bg); margin-bottom: 15px; padding: 20px;
            border-radius: 12px; box-shadow: 0 3px 6px rgba(0,0,0,0.06);
            border-left: 6px solid var(--main-color);
            opacity: 0; transform: translateX(40px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            pointer-events: none; width: 100%; box-sizing: border-box;
        }

        .item.reveal { opacity: 1; transform: translateX(0); pointer-events: auto; }
        .item-main { display: flex; align-items: center; }
        input[type="checkbox"] { width: 22px; height: 22px; margin-right: 18px; cursor: pointer; accent-color: var(--main-color); }
        label { cursor: pointer; font-weight: bold; font-size: 1.1em; flex: 1; }
        .hint { margin-left: 40px; margin-top: 10px; font-size: 0.9em; background: var(--hint-bg); padding: 12px; border-radius: 8px; line-height: 1.5; color: #555; border: 1px dashed rgba(0,0,0,0.1); }
        .gw-link { display: inline-block; margin-top: 10px; color: var(--link-color); text-decoration: none; font-size: 0.85em; font-weight: bold; }

        /* --- ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– --- */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { position: sticky; width: 100%; height: auto; border-right: none; border-bottom: 2px solid var(--main-color); }
            .nav-label { display: none; }
            .tabs-row { display: flex; width: 100%; }
            .tab { flex: 1; text-align: center; border-left: none; border-bottom: 4px solid transparent; padding: 15px 5px; }
            .tab.active { border-left: none; border-bottom: 4px solid var(--main-color); }
            
            .main-container { margin-left: 0; width: 100%; padding: 20px; }
            .progress-card { grid-template-columns: 1fr; gap: 15px; }
            .hint { margin-left: 0; }
        }
    </style>
</head>
<body>

<nav class="sidebar">
    <div class="nav-label">CATEGORIES</div>
    <div class="tabs-row">
        <button class="tab active" onclick="showTab(event, 'paintings')">ğŸ–¼ï¸ åç”»ãƒªã‚¹ãƒˆ</button>
        <button class="tab" onclick="showTab(event, 'statues')">ğŸ—¿ å½«åˆ»ãƒªã‚¹ãƒˆ</button>
    </div>
</nav>

<div class="action-group">
    <button class="action-btn" onclick="exportJSON()" title="ã‚»ãƒ¼ãƒ–">ğŸ’¾</button>
    <button class="action-btn" onclick="document.getElementById('importFile').click()" title="ãƒ­ãƒ¼ãƒ‰">ğŸ“‚</button>
    <button class="action-btn secondary" onclick="toggleDarkMode()" title="ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">ğŸŒ“</button>
    <input type="file" id="importFile" style="display:none" onchange="importJSON(event)" accept=".json">
</div>

<main class="main-container">
    <div class="header-section">
        <h1>åšç‰©é¤¨ å¯„è´ˆãƒã‚§ãƒƒã‚¯</h1>
        <div class="progress-card">
            <div class="prog-item">
                <span class="prog-label">åç”»åé›†ç‡</span>
                <div class="progress-bar-bg"><div id="prog-fill-paintings" class="progress-fill"></div></div>
                <div style="font-size: 0.8em; margin-top:6px; font-weight: bold;" id="prog-text-paintings">0%</div>
            </div>
            <div class="prog-item">
                <span class="prog-label">å½«åˆ»åé›†ç‡</span>
                <div class="progress-bar-bg"><div id="prog-fill-statues" class="progress-fill"></div></div>
                <div style="font-size: 0.8em; margin-top:6px; font-weight: bold;" id="prog-text-statues">0%</div>
            </div>
        </div>
    </div>

    <div id="paintings" class="content active"></div>
    <div id="statues" class="content"></div>
</main>

<script>
// (ãƒ‡ãƒ¼ã‚¿éƒ¨åˆ†ã¯å¤‰æ›´ãªã—ã®ãŸã‚çœç•¥ã—ã¦å®Ÿè£…ã§ãã¾ã™ãŒã€æ§‹é€ ç¶­æŒã®ãŸã‚ä¸»è¦ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿è¨˜è¼‰)
const BASE_URL = "https://gamewith.jp/atsumori/article/show/198878";
const data = {
    paintings: [
        {name: "ã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯ãªã‚ã„ãŒ", hint: "å³ä¸Šã«ã‚³ãƒ¼ãƒ’ãƒ¼ã‚«ãƒƒãƒ—ã®è·¡ãŒã‚ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã‚ã‚‰ã¶ã‚‹ã‚ã„ãŒã®ã²ã ã‚Š", hint: "é›·ç¥ã®è‚ŒãŒç™½ã„ã®ãŒå½ç‰©ï¼ˆæœ¬ç‰©ã¯ç·‘ï¼‰"},
        {name: "ã‚ã‚‰ã¶ã‚‹ã‚ã„ãŒã®ã¿ã", hint: "é¢¨ç¥ã®è‚ŒãŒç·‘ãªã®ãŒå½ç‰©ï¼ˆæœ¬ç‰©ã¯ç™½ï¼‰"},
        {name: "ã„ã„ã‹ã‚“ã˜ã®ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã„ã„ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã„ããªã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã„ã•ã¾ã—ã„ã‚ã„ãŒ", hint: "å‰é«ªãŒã±ã£ã¤ã‚“ï¼ˆç›´ç·šï¼‰ãªã®ãŒå½ç‰©"},
        {name: "ã„ãªã›ãªã‚ã„ãŒ", hint: "çœ‰ãŒä¸ŠãŒã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ãŠã”ãã‹ãªã‚ã„ãŒ", hint: "å¥¥ã®æ‰‰ã®ç”·æ€§ãŒã‚«ãƒ¼ãƒ†ãƒ³ã‚’è§¦ã£ã¦ã„ãªã„ã®ãŒå½ç‰©"},
        {name: "ãŠã ã‚„ã‹ãªã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ãŠã¡ã¤ã„ãŸã‚ã„ãŒ", hint: "ç‰›ä¹³ãŒãƒ‰ãƒãƒ‰ãƒå‡ºã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ãŠã‚‚ã—ã‚ã„ã‚ã„ãŒ", hint: "èƒ¸ã«èŠ±ï¼ˆã‚¢ãƒ¼ãƒ†ã‚£ãƒãƒ§ãƒ¼ã‚¯ï¼‰ãŒãªã„ã®ãŒå½ç‰©"},
        {name: "ã‹ã¡ã®ã‚ã‚‹ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ãã‚Œã„ãªã‚ã„ãŒ", hint: "å³ä¸Šã«æœ¨ï¼ˆæ£®ï¼‰ãŒãªã„ã®ãŒå½ç‰©"},
        {name: "ã—ãšã¿ã‚†ãã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã—ãªã‚„ã‹ãªã‚ã„ãŒ", hint: "å·¦å‘ãã€ã¾ãŸã¯å·¨å¤§ãªã®ãŒå½ç‰©"},
        {name: "ã™ã”ã„ã‚ã„ãŒ", hint: "ä¸­å¤®ã®ç”·æ€§ãŒå¸½å­ã‚’è¢«ã£ã¦ã„ãªã„ã®ãŒå½ç‰©"},
        {name: "ã™ã¦ããªã‚ã„ãŒ", hint: "è€³é£¾ã‚ŠãŒæ˜Ÿå‹ã€ã¾ãŸã¯ç›®ã‚’é–‰ã˜ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã™ã°ã‚‰ã—ã„ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ãŸãŠã‚„ã‹ãªã‚ã„ãŒ", hint: "æŠ±ã„ã¦ã„ã‚‹ç™½è²‚ãŒã‚°ãƒ¬ãƒ¼ãªã®ãŒå½ç‰©"},
        {name: "ãŸãã„ã¾ã‚Œãªã‚‹ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¡ã‹ã‚‰ã¥ã‚ˆã„ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¡ã¿ã¤ãªã‚ã„ãŒ", hint: "èŠ±ãŒç´«ã€ã¾ãŸã¯å°ãŒãªã„ã®ãŒå½ç‰©"},
        {name: "ãªãã‚ã„ãŸã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã«ãã‚„ã‹ãªã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¯ãªã‚„ã‹ãªã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã²ã‹ã‚Šã®ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¾ãŸãŸãã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¿ã”ã¨ãªã‚ã„ãŒ", hint: "å·¦å´ã«ç‹©äººãŸã¡ãŒã„ãªã„ã®ãŒå½ç‰©"},
        {name: "ã¿ãšã¿ãšã—ã„ã‚ã„ãŒ", hint: "å³ä¸Šã«ã‚·ãƒŸãŒã‚ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã‚€ã˜ã¤ãªã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã‚ã„ãŸã‚‹ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã‚†ã†ã‚ã„ãªã‚ã„ãŒ", hint: "ã¾ã‚†ã’ãŒã‚ã‚‹ï¼ˆè¦‹ãˆã‚‹ï¼‰ã®ãŒå½ç‰©"},
        {name: "ã‚ˆãã¿ã‚‹ã‚ã„ãŒ", hint: "æœ¬ç‰©ã®ã¿"}
    ],
    statues: [
        {name: "ã„ã—ã¥ãã‚Šã®ã¡ã‚‡ã†ã“ã", hint: "ãƒ‹ãƒ¤ãƒªã¨ç¬‘ã£ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã„ã«ã—ãˆã®ã¡ã‚‡ã†ã“ã", hint: "è€³ã«ã‚¢ãƒ³ãƒ†ãƒŠãŒã‚ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã†ã¤ãã—ã„ã¡ã‚‡ã†ã“ã", hint: "é¦–ã«ãƒãƒƒã‚¯ãƒ¬ã‚¹ã‚’ã—ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ãŠãŠã„ãªã‚‹ã¡ã‚‡ã†ã“ã", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã‹ã¦ã„ãªã¡ã‚‡ã†ã“ã", hint: "å™¨ã«ãƒ•ã‚¿ãŒã‚ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã“ã†ã”ã†ã—ã„ã¡ã‚‡ã†ã“ã", hint: "å·¦è¶³ãŒå‰ãªã®ãŒå½ç‰©ï¼ˆæœ¬ç‰©ã¯å³ï¼‰"},
        {name: "ã—ã‚“ã´ã¦ããªã¡ã‚‡ã†ã“ã", hint: "å³è€³ã«ã‚¤ãƒ¤ãƒªãƒ³ã‚°ãŒã‚ã‚‹ã®ãŒå½ç‰©"},
        {name: "ãŸãã¾ã—ã„ã¡ã‚‡ã†ã“ã", hint: "å³æ‰‹ã«è…•æ™‚è¨ˆã‚’ã—ã¦ã„ã‚‹ã®ãŒå½ç‰©"},
        {name: "ã¦ãŒã‹ã‚Šã®ã¡ã‚‡ã†ã“ã", hint: "è‰²ãŒé’ã„ã®ãŒå½ç‰©"},
        {name: "ã¨ã¦ã¤ã‚‚ãªã„ã¡ã‚‡ã†ã“ã", hint: "å–ã£æ‰‹ãŒãªã„ã®ãŒå½ç‰©"},
        {name: "ãªã˜ã¿ã®ã‚ã‚‹ã¡ã‚‡ã†ã“ã", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã¼ã‚“ã‚„ã‚Šã—ãŸã¡ã‚‡ã†ã“ã", hint: "æœ¬ç‰©ã®ã¿"},
        {name: "ã‚Šã‚Šã—ã„ã¡ã‚‡ã†ã“ã", hint: "å³è„‡ã«æœ¬ã‚’æŠ±ãˆã¦ã„ã‚‹ã®ãŒå½ç‰©"}
    ]
};

function createList(type, listId) {
    const container = document.getElementById(listId);
    data[type].forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        const id = `check-${item.name}`;
        const checked = localStorage.getItem(id) === 'true' ? 'checked' : '';
        const link = `${BASE_URL}#:~:text=${encodeURIComponent(item.name)}`;
        div.innerHTML = `
            <div class="item-main">
                <input type="checkbox" id="${id}" ${checked} onclick="updateStatus('${id}')">
                <label for="${id}">${item.name}</label>
            </div>
            <div class="hint">
                ${item.hint}<br>
                <a href="${link}" target="_blank" class="gw-link">ğŸ–¼ï¸ è¦‹åˆ†ã‘æ–¹ã‚’å†™çœŸã§ç¢ºèª</a>
            </div>
        `;
        container.appendChild(div);
    });
}

function showTab(evt, tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    evt.currentTarget.classList.add('active');
    document.querySelectorAll('.content').forEach(c => {
        c.classList.remove('active');
        c.querySelectorAll('.item').forEach(item => item.classList.remove('reveal'));
    });
    document.getElementById(tabName).classList.add('active');
    window.scrollTo({top: 0, behavior: 'smooth'});
    setTimeout(handleScroll, 100);
}

function updateStatus(id) {
    const cb = document.getElementById(id);
    if (cb.checked) localStorage.setItem(id, 'true');
    else localStorage.removeItem(id);
    updateProgressBar();
}

function updateProgressBar() {
    ['paintings', 'statues'].forEach(cat => {
        const total = data[cat].length;
        const checked = data[cat].filter(item => localStorage.getItem(`check-${item.name}`) === 'true').length;
        const percent = Math.round((checked / total) * 100);
        document.getElementById(`prog-text-${cat}`).innerText = `${percent}% (${checked}/${total})`;
        document.getElementById(`prog-fill-${cat}`).style.width = `${percent}%`;
    });
}

function exportJSON() {
    const storageData = {};
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('check-')) storageData[key] = true;
    }
    let fileName = prompt("ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«å", "backup");
    if (!fileName) return;
    const blob = new Blob([JSON.stringify(storageData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = `${fileName}.json`; a.click();
}

function importJSON(event) {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const importedData = JSON.parse(e.target.result);
            for (let i = localStorage.length - 1; i >= 0; i--) {
                const key = localStorage.key(i);
                if (key.startsWith('check-')) localStorage.removeItem(key);
            }
            Object.keys(importedData).forEach(key => localStorage.setItem(key, 'true'));
            alert('ãƒ­ãƒ¼ãƒ‰å®Œäº†'); location.reload();
        } catch (err) { alert('ã‚¨ãƒ©ãƒ¼'); }
    };
    reader.readAsText(file);
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
}

function handleScroll() {
    const items = document.querySelectorAll('.content.active .item');
    const triggerBottom = window.innerHeight * 0.92;
    items.forEach(item => {
        const rect = item.getBoundingClientRect();
        if (rect.top < triggerBottom && rect.bottom > 0) item.classList.add('reveal');
        else item.classList.remove('reveal');
    });
}

createList('paintings', 'paintings');
createList('statues', 'statues');
updateProgressBar();
if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark-mode');
window.addEventListener('scroll', handleScroll);
setTimeout(handleScroll, 100);
</script>

</body>
</html>
